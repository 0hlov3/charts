# synapse-admin

A Helm chart for deploying [Awesome-Technologies/synapse-admin](https://github.com/Awesome-Technologies/synapse-admin), a web UI to manage Matrix Synapse.

## Prerequisites

 - Kubernetes 1.19+ (recommended)
 - Helm 3.8+
 - (Optional) An Ingress controller if you enable ingress.enabled

## Parameters

### Image parameters

| Name               | Description                                         | Value                               |
| ------------------ | --------------------------------------------------- | ----------------------------------- |
| `image.registry`   | Image registry                                      | `docker.io`                         |
| `image.repository` | Image repository                                    | `awesometechnologies/synapse-admin` |
| `image.pullPolicy` | Image pull policy                                   | `IfNotPresent`                      |
| `image.tag`        | Image tag (defaults to chart appVersion if not set) | `""`                                |

### ServiceAccount parameters

| Name                         | Description                                                | Value  |
| ---------------------------- | ---------------------------------------------------------- | ------ |
| `serviceAccount.create`      | Whether to create a ServiceAccount                         | `true` |
| `serviceAccount.automount`   | Automatically mount the ServiceAccount token               | `true` |
| `serviceAccount.annotations` | Annotations to add to the ServiceAccount                   | `{}`   |
| `serviceAccount.name`        | Name of the ServiceAccount to use (autogenerated if empty) | `""`   |

### Pod annotations & labels

| Name             | Description                      | Value |
| ---------------- | -------------------------------- | ----- |
| `podAnnotations` | Annotations for the pod(s)       | `{}`  |
| `podLabels`      | Additional labels for the pod(s) | `{}`  |

### Pod security context

| Name                 | Description                | Value |
| -------------------- | -------------------------- | ----- |
| `podSecurityContext` | Pod-level security context | `nil` |

### Container security context

| Name              | Description                      | Value |
| ----------------- | -------------------------------- | ----- |
| `securityContext` | Container-level security context | `nil` |

### Service parameters

| Name           | Description             | Value       |
| -------------- | ----------------------- | ----------- |
| `service.type` | Kubernetes service type | `ClusterIP` |
| `service.port` | Service port            | `80`        |

### Ingress parameters

| Name                  | Description                                       | Value   |
| --------------------- | ------------------------------------------------- | ------- |
| `ingress.enabled`     | Enable ingress record creation                    | `false` |
| `ingress.className`   | Ingress class name                                | `""`    |
| `ingress.annotations` | Additional annotations for the Ingress resource   | `{}`    |
| `ingress.hosts`       | Ingress host definitions (host + paths)           | `[]`    |
| `ingress.tls`         | TLS configuration for ingress (secrets and hosts) | `[]`    |

### Config parameters

| Name                       | Description                                                         | Value   |
| -------------------------- | ------------------------------------------------------------------- | ------- |
| `config.enabled`           | Enable mounting a config.json ConfigMap                             | `false` |
| `config.existingConfigMap` | Existing ConfigMap name with a config.json key                      | `""`    |
| `config.mountPath`         | Path to mount config.json in the container                          | `""`    |
| `config.json`              | JSON content for config.json (used when existingConfigMap is empty) | `{}`    |

### Resources & Probes

| Name                     | Description                                | Value  |
| ------------------------ | ------------------------------------------ | ------ |
| `resources`              | Resource requests/limits for the container | `{}`   |
| `livenessProbe.enabled`  | Enable liveness probe                      | `true` |
| `livenessProbe.config`   | Liveness probe configuration               | `{}`   |
| `readinessProbe.enabled` | Enable readiness probe                     | `true` |
| `readinessProbe.config`  | Readiness probe configuration              | `{}`   |

### Scheduling

| Name           | Description                       | Value |
| -------------- | --------------------------------- | ----- |
| `nodeSelector` | Node labels for pod assignment    | `{}`  |
| `tolerations`  | Tolerations for pod assignment    | `[]`  |
| `affinity`     | Affinity rules for pod assignment | `{}`  |

### Common parameters

| Name               | Description                                                                  | Value |
| ------------------ | ---------------------------------------------------------------------------- | ----- |
| `replicaCount`     | Number of pod replicas to deploy                                             | `1`   |
| `imagePullSecrets` | Secrets for pulling images from private registries                           | `[]`  |
| `nameOverride`     | String to partially override fullname template (releases with the same name) | `""`  |
| `fullnameOverride` | String to fully override fullname template                                   | `""`  |
